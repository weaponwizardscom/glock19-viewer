(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function m(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function f(r){if(r.ep)return;r.ep=!0;const c=m(r);fetch(r.href,c)}})();document.addEventListener("DOMContentLoaded",()=>{const E="g17.svg",u="img/glock17.png",m=["img/t1.png","img/t2.png","img/t3.png","img/t4.png","img/t5.png","img/t6.png","img/t7.png"],f={zamek:400,szkielet:400,spust:150,lufa:200,zerdz:50,pazur:50,zrzut:50,blokadap:50,blokada2:50,pin:50,stopka:150},r=800,c=1e3,o=e=>document.getElementById(e),h=o("gun-view"),y=o("parts"),T=o("palette"),W=o("price"),w=o("bg-btn"),z=o("save-btn"),A=o("reset-btn"),P=o("send-btn"),B=o("modal"),L=o("m-send"),F=o("m-cancel"),x=o("m-name"),G=o("m-mail"),I=o("m-phone"),N=o("pl"),M=o("en"),$=o("h-parts"),q=o("h-col"),U=o("modal-title"),Z=o("modal-note"),d=[{id:"zamek",pl:"Zamek",en:"Slide"},{id:"szkielet",pl:"Szkielet",en:"Frame"},{id:"spust",pl:"Spust",en:"Trigger"},{id:"lufa",pl:"Lufa",en:"Barrel"},{id:"zerdz",pl:"Żerdź",en:"Recoil spring"},{id:"pazur",pl:"Pazur",en:"Extractor"},{id:"zrzut",pl:"Zrzut magazynka",en:"Magazine catch"},{id:"blokadap",pl:"Blokada zamka",en:"Slide lock"},{id:"blokada2",pl:"Zrzut zamka",en:"Slide stop lever"},{id:"pin",pl:"Pin",en:"Trigger pin"},{id:"stopka",pl:"Stopka",en:"Floorplate"},{id:"plytka",pl:"Płytka",en:"Back plate",disabled:!0}],g={};Object.assign(g,{"H-140 Bright White":"#FFFFFF","H-242 Hidden White":"#E5E4E2","H-136 Snow White":"#F5F5F5","H-297 Stormtrooper White":"#F2F2F2","H-300 Armor Clear":"#F5F5F5","H-331 Parakeet Green":"#C2D94B","H-141 Prison Pink":"#E55C9C","H-306 Springfield Grey":"#A2A4A6","H-312 Frost":"#C9C8C6","H-214 S&W Grey":"#8D918D","H-265 Cold War Grey":"#999B9E","H-227 Tactical Grey":"#8D8A82","H-170 Titanium":"#7A7A7A","H-130 Combat Grey":"#6A6A6A","H-237 Tungsten":"#6E7176","H-210 Sig Dark Grey":"#5B5E5E","H-234 Sniper Grey":"#5B6063","H-342 Smoke":"#84888B","H-321 Blush":"#D8C0C4","H-213 Battleship Grey":"#52595D","H-146 Graphite Black":"#3B3B3B","H-190 Armor Black":"#212121","H-142 Light Sand":"#D2C3A8","H-199 Desert Sand":"#C5BBAA","H-267 Magpul FDE":"#A48F6A","H-269 Barrett Brown":"#67594D","H-148 Burnt Bronze":"#8C6A48","H-339 Federal Brown":"#5E5044","H-8000 RAL 8000":"#937750","H-33446 FS Sabre Sand":"#B19672","H-240 Mil Spec O.D. Green":"#5F604F","H-247 Desert Sage":"#6A6B5C","H-229 Sniper Green":"#565A4B","H-344 Olive":"#6B6543","H-189 Noveske Bazooka Green":"#6C6B4E","H-353 Island Green":"#00887A","H-127 Kel-Tec Navy Blue":"#2B3C4B","H-171 NRA Blue":"#00387B","H-188 Stealth Grey":"#5C6670","H-256 Cobalt":"#395173","H-258 Socom Blue":"#3B4B5A","H-329 Blue Raspberry":"#0077C0","H-362 Patriot Blue":"#33415C","H-197 Wild Purple":"#5A3A54","H-217 Bright Purple":"#8A2BE2","H-332 Purplexed":"#6C4E7C","H-357 Periwinkle":"#6B6EA6","H-128 Hunter Orange":"#F26522","H-167 USMC Red":"#9E2B2F","H-216 S&W Red":"#B70101","H-221 Crimson":"#891F2B","H-317 Sunflower":"#F9A602","H-354 Lemon Zest":"#F7D51D","H-122 Gold":"#B79436","H-151 Satin Aluminum":"#C0C0C0"});let s="pl",p={},b=null,H=0;(async()=>(await K(),await X(),V(),Y(),O()))();function K(){m.forEach(e=>{const t=new Image;t.src=e})}async function X(){h.innerHTML=await fetch(E).then(n=>n.text());const e=h.querySelector("svg"),t=document.createElementNS("http://www.w3.org/2000/svg","g");t.id="color-overlays",e.appendChild(t),d.filter(n=>!n.disabled).forEach(n=>{const a=e.querySelector("#"+n.id);a&&["1","2"].forEach(l=>{const i=a.cloneNode(!0);i.id=`color-overlay-${l}-${n.id}`,i.classList.add("color-overlay"),t.appendChild(i)})})}function V(){d.forEach(e=>{const t=document.createElement("button");t.textContent=e[s],t.dataset.id=e.id,e.disabled?(t.classList.add("disabled"),t.disabled=!0):t.onclick=()=>_(t,e.id),y.appendChild(t)}),["MIX (≤2)","MIX (3+)"].forEach((e,t)=>{const n=document.createElement("button");n.className="mix",n.textContent=e,n.onclick=()=>J(t?void 0:2),y.appendChild(n)}),Object.entries(g).forEach(([e,t])=>{const[n,...a]=e.split(" "),l=a.join(" "),i=document.createElement("div");i.className="sw",i.title=e,i.onclick=()=>C(b,t,n),i.innerHTML=`<div class="dot" style="background:${t}"></div><div class="lbl">${n}<br>${l}</div>`,T.appendChild(i)}),w.onclick=O,z.onclick=D,A.onclick=Q,P.onclick=()=>B.classList.remove("hidden"),F.onclick=()=>B.classList.add("hidden"),L.onclick=ee,N.onclick=()=>j("pl"),M.onclick=()=>j("en")}function j(e){s=e,y.querySelectorAll("button").forEach(t=>{const n=d.find(a=>a.id===t.dataset.id);n&&(t.textContent=n[s])}),$.textContent=e==="pl"?"1. Wybierz część":"1. Select part",q.textContent=e==="pl"?"2. Wybierz kolor (Cerakote)":"2. Select colour (Cerakote)",w.textContent=e==="pl"?"Zmień Tło":"Change background",z.textContent=e==="pl"?"Zapisz Obraz":"Save image",A.textContent=e==="pl"?"Resetuj Kolory":"Reset colours",P.textContent=e==="pl"?"Wyślij do Wizards!":"Send to Wizards!",L.textContent=e==="pl"?"Wyślij":"Send",F.textContent=e==="pl"?"Anuluj":"Cancel",x.placeholder=e==="pl"?"Imię":"Name",G.placeholder="E-mail",I.placeholder=e==="pl"?"Telefon":"Phone",U.textContent=e==="pl"?"Wyślij projekt":"Send project",Z.textContent=e==="pl"?"Po wysłaniu dołącz pobrany plik PNG.":"After sending, attach the downloaded PNG.",N.classList.toggle("active",e==="pl"),M.classList.toggle("active",e==="en"),k()}function _(e,t){y.querySelectorAll("button").forEach(n=>n.classList.remove("selected")),e.classList.add("selected"),b=t}function C(e,t,n){if(!e){alert(s==="pl"?"Najpierw wybierz część":"Select a part first");return}["1","2"].forEach(a=>{const l=document.getElementById(`color-overlay-${a}-${e}`);l&&(l.tagName==="g"?l.querySelectorAll("*"):[l]).forEach(i=>i.style.fill=t)}),p[e]=n,k(),S()}function J(e){const t=Object.keys(g),n=new Set;d.filter(a=>!a.disabled).forEach(a=>{let l;do l=t[Math.floor(Math.random()*t.length)];while(e&&n.size>=e&&!n.has(l.split(" ")[0]));n.add(l.split(" ")[0]),C(a.id,g[l],l.split(" ")[0])})}function Q(){document.querySelectorAll(".color-overlay").forEach(e=>{(e.tagName==="g"?e.querySelectorAll("*"):[e]).forEach(t=>t.style.fill="transparent")}),p={},b=null,k(),S()}function Y(){d.filter(e=>!e.disabled).forEach(e=>C(e.id,g["H-146 Graphite Black"],"H-146"))}function O(){H=(H+1)%m.length,h.style.backgroundImage=`url('${m[H]}')`}function k(){const e=o("summary-list");e.innerHTML="",d.forEach(t=>{if(p[t.id]){const n=document.createElement("div");n.textContent=`${t[s]} – ${p[t.id]}`,e.appendChild(n)}})}function S(){const e=new Set(Object.values(p)).size;let t=Object.keys(p).reduce((n,a)=>n+(f[a]||0),0);return t=e<=2?Math.min(t,r):Math.min(t,c),W.innerHTML=(s==="pl"?"Szacowany koszt:&nbsp;&nbsp;":"Estimated cost:&nbsp;&nbsp;")+t+"&nbsp;zł",t}const v=e=>new Promise(t=>{const n=new Image;n.onload=()=>t(n),n.src=e});async function D(){const e=document.createElement("canvas");e.width=1600,e.height=1200;const t=e.getContext("2d");t.drawImage(await v(m[H]),0,0,1600,1200),t.drawImage(await v(u),0,0,1600,1200);const n=h.querySelector("svg");await Promise.all([...n.querySelectorAll(".color-overlay")].filter(l=>l.style.fill!=="transparent").map(async l=>{const i=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${n.getAttribute("viewBox")}"><g style="mix-blend-mode:hard-light;opacity:.45">${l.outerHTML}</g></svg>`,R=URL.createObjectURL(new Blob([i],{type:"image/svg+xml"}));t.drawImage(await v(R),0,0,1600,1200),URL.revokeObjectURL(R)}));const a=document.createElement("a");return a.href=e.toDataURL("image/png"),a.download="weapon-wizards.png",a.click(),a.href}async function ee(){const e=x.value.trim(),t=G.value.trim(),n=I.value.trim();if(!e||!t){alert(s==="pl"?"Podaj imię i e-mail":"Please provide name and email");return}await D();const a=S(),l=[(s==="pl"?"Imię":"Name")+": "+e,"Telefon: "+n,"E-mail: "+t,(s==="pl"?"Koszt":"Cost")+": "+a+" zł","","Kolory:",...d.map(i=>`${i[s]} – ${p[i.id]||"–"}`),"",s==="pl"?"Dołącz pobrany plik PNG.":"Attach the downloaded PNG."].join("%0D%0A");location.href=`mailto:contact@weapon-wizards.com?subject=Projekt%20Weapon%20Wizards&cc=${encodeURIComponent(t)}&body=${l}`,B.classList.add("hidden")}});
