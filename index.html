<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weapon-Wizards.com - Konfigurator</title>
    <style>
        :root {
            --page-background: #121212;
            --container-background: #ffffff;
            --gun-view-background: #000000;
            --text-color: #1c1e21;
            --border-color: #dee2e6;
            --primary-color: #007bff;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--page-background); display: flex; justify-content: center; padding: 20px; }
        .configurator-container { background-color: var(--container-background); border-radius: 8px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5); display: flex; flex-wrap: wrap; padding: 24px; width: 100%; max-width: 1200px; gap: 24px; }
        .gun-view { flex: 2 1 600px; position: relative; width: 100%; max-width: 800px; aspect-ratio: 1165.01 / 910.88; background-color: var(--gun-view-background); border-radius: 6px; }
        .gun-svg { width: 100%; height: 100%; }
        .color-overlay { transition: fill 0.2s ease-in-out; pointer-events: none; }
        .controls { flex: 1 1 300px; min-width: 300px; }
        .control-section h3 { margin-top: 0; margin-bottom: 12px; border-bottom: 1px solid var(--border-color); padding-bottom: 8px; color: var(--text-color); }
        .part-selection button { display: block; width: 100%; padding: 10px 12px; margin-bottom: 8px; font-size: 14px; text-align: left; border-radius: 6px; border: 1px solid var(--border-color); background-color: #f5f6f7; cursor: pointer; transition: all 0.2s; }
        .part-selection button.selected { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
        .color-palette { display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 20px 15px; }
        .color-swatch-wrapper { display: flex; flex-direction: column; align-items: center; height: 75px; }
        .color-swatch { width: 60px; height: 50px; cursor: pointer; border: 1px solid rgba(0,0,0,0.2); clip-path: polygon(0% 15%, 100% 0%, 100% 85%, 0% 100%); transition: transform 0.2s ease; }
        .color-swatch:hover { transform: scale(1.1); border: 2px solid var(--primary-color); }
        .color-swatch-label { margin-top: 6px; font-size: 9px; color: #6c757d; text-align: center; word-break: break-word; }
        .reset-button { margin-top: 16px; width: 100%; padding: 12px; font-size: 16px; border: none; background-color: #dc3545; color: white; border-radius: 6px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="configurator-container">
        <div class="gun-view">
            <svg id="Warstwa_1" data-name="Warstwa 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1165.01 910.88" class="gun-svg">
                <defs>
                    <pattern id="texture-szkielet" patternUnits="userSpaceOnUse" width="1600" height="1200"><image href="img/szkielet.png" x="-150" y="-150" width="1600" height="1200"/></pattern>
                    <pattern id="texture-zamek" patternUnits="userSpaceOnUse" width="1600" height="1200"><image href="img/zamek.png" x="-150" y="-150" width="1600" height="1200"/></pattern>
                    <pattern id="texture-spust" patternUnits="userSpaceOnUse" width="1600" height="1200"><image href="img/spust.png" x="-150" y="-150" width="1600" height="1200"/></pattern>
                    <pattern id="texture-zerdz" patternUnits="userSpaceOnUse" width="1600" height="1200"><image href="img/zerdz.png" x="-150" y="-150" width="1600" height="1200"/></pattern>
                    <pattern id="texture-zrzut" patternUnits="userSpaceOnUse" width="1600" height="1200"><image href="img/zrzut.png" x="-150" y="-150" width="1600" height="1200"/></pattern>
                </defs>
                <g id="texture-layers" style="pointer-events:none;">
                    <path fill="url(#texture-szkielet)" d="M1086.95,259.28c-.92,8.38-12.74,33.3-18.76,39.2-10.22,10-37.44,23.28-51.57,25.06l-321.67-5.35c-9.89,7.75-12.39,15.37-13.76,27.55-3.43,30.44-.73,73.39,3.06,103.99,2.05,16.54,8.43,31.73,10.42,46.55,2.02,15-9.61,21.22-21.83,25.8-32.56,12.18-52.33,6.66-85.51,4.91-48.93-2.58-101.93-3.81-150.3-9.85-5.46-.68-14.15-2.54-19.38-4.2-6.64-2.1-12.03-7.02-19.34-5.51l-72.14,305.58c-2.21,14.33,3.03,34.1,1.33,47.49-.42,3.31-2.34,4.99-2.91,7.89-.94,4.76-.34,11.28-1.51,16.17-2.2,3.67-60.91,18.36-69.28,20.13-59.43,12.52-115.2,3.69-174.25-5.58-15.66-2.46-31.2-5.84-46.89-8.13-1.63-1.12-.43-5.16-1.43-7.41-.94-2.13-9.47-9.02-11.79-11.79-12.96-15.47-14.54-44.55-15.26-64.32-2.51-69.43,11.51-112.01,32.2-176.14,29.57-91.67,63.86-187.74,64.56-285.6.07-9.85.16-33.27-1.64-42.02-.92-4.51-16.37-35.13-19.6-40.32-7.34-11.8-32.21-42.01-43.52-48.83-4.17-2.52-12.38-3.29-17.23-5.37-1.92-.82-12.96-7.6-13.81-8.78-2.16-2.99-4.29-20.33-.95-22.69,10.71-2.16,22.04-1.67,32.99-1.48,63.83,1.12,127.6,6.64,191.57,6.92,4.85-1.6,5.17,7.26,7.42,4.3,1.41-1.86.97-4.63,4.79-5.83,8.1.28,27.57-1.02,34.41,2.04,3.37,1.51,6.79,8.16,8.54,11.31,3.85.13,7.76-.28,11.61-.03,15.56,1.02,33.94,4,49.15,3.93,5.65-.02,10.95-5.15,14.77-5.86,6.08-1.13,12.68.68,18.63.93,62.87,2.64,125.82,7.44,188.65,10.81,113.3,6.06,226.64,8.26,339.91,10.86,25.27.58,54.96-1.29,79.63.94,1.14.1,4.12.42,4.43,1.67.29,7.21,2.27,14.28,2.92,21.43.4,4.39-.68,9.07-.32,13.1.82,9.24,16.46,38.11,24.62,42.17,6.26,3.11,22.15,4.45,28.8,2.71,6.2-1.63,23.03-15.81,26.69-21.45l13.56-34.08c-.43,5.51.6,11.79,0,17.19ZM265.36,230.11c1.6-5.69,1.22-31.4,6.06-33.72,2.76-1.32,7.5.57,9.82-2.93-4.43-3.95-5.6-8.54-12.24-9.36-4.96-.61-23.59-1.98-27.34-.97-.91.24-2.51,4.46-4.65,5.39-4.05,1.76-8.71-.69-9.82,6.41-1.27.85-6.06-6.68-10.81-.25s-7.89,26.1-5.34,33.61c.28.82,4.73,7.12,5.35,7.42,1.64.78,20.95,3.23,24.09,3.41,13.11.78,14.49-3.44,24.86-9.01ZM465.87,229.43c-2.92-.28-9.08-5.01-11.2-2.09-.68.94-6.22,20.63-6.35,22.24-.53,6.71,7.56,7.38,12.75,7.24l4.8-27.39ZM395.87,265.03c-3.77-3.41-10.38-3.44-11.41,2.13-1.76,9.46.84,20.7,12.54,18.91,5.06-5.08,4.01-16.39-1.13-21.04ZM480.72,312.82c-16.59-2.03-32.83,4.17-48.75,5.77-5.36.54-11.08-.47-16.35.36-4.69.74-19.55,6.67-21.13,11.29-2.24,13.01-5.84,24.64-6.17,38.04-.6,24.76,17.76,69.22,33.47,88.43.93,1.13,7.01,7.99,7.54,8.18,3.91,1.46,15,2.31,19.34,2.02,3.7-.25,19.67-4.59,21.25-7.48,1.32-2.42,2.33-8.7,1.91-11.48s-2.82-5.32-3.6-8.2c-7.49-27.45-7.63-73.37.98-100.63,1.04-3.29,13.26-24.74,11.51-26.3ZM473.95,455.14c5.35,3.61,10.8,5.65,17.22,6.86,17.2,3.24,36.25,2.62,53.87,5.09,3.56.5,21.19.43,24.17-.49,2.82-.87,5.47-6.35,6.57-9.14,6.24-15.77,5.42-60.22,4.23-78.37-1.44-21.86-13.07-44.63-30.47-57.94-13.05-9.99-24.21-4.88-38.78-6.41-1.95-.2-3.54-1.79-5.95-1.98-3.72-.28-5.86,1.58-8.92,1.95-5.49.67-9.74-1.93-13.61,3.09-6.34,8.23-12.24,30.54-14.19,40.83-2.84,14.99-4.39,46.63-2.04,61.71,1.49,9.57,8.66,22.54,8.84,31.48.02,1.17-.69,2.25-.94,3.33ZM312.61,420.97c-24.77-6.4-50.54-11.17-72.6-24.65l-6.73,54.36,29.91,17.26c2.39.93,1.79-4.17,2.44-4.73,14.59,1.83,28.06,8.5,43.14,8.74l3.84-50.98Z"/>
                    <path fill="url(#texture-zamek)" d="M65.11,28.92c.72-6.36,4.59-11.32,10.53-13.53,30.84-2.2,63.58-12,94.07-14.01,66.42-4.37,140.49,2.9,207.32,4.99,30.08.94,62.35-1.49,91.47,3.93,1.84.34.78-1.83,2.83-2.08,4.44-.55,12.02-.08,16.81.04,148.93,3.87,298.15,5.15,446.97,8.92,10.98.28,22.13-.65,33.02.39l.92,10.38,48.48.62,16.37-2.59-.98-5.89h19.16c3.31.9,3.94,4.91,5.73,6.55,3.04,2.8,7.65,4.74,11.01,8.15,8.05,8.18,22.47,28.67,23.96,39.9-1.57,35.03,2.37,72.26.12,107.03-.63,9.7-5,14.14-5.88,19.66-4.62,28.73,7.38,43.39-10.69,72.81-9.17,14.93-32.85,32.02-50.99,25.1-16.78-6.4-32.7-32.24-32.7-49.83v-34.87c-14.55-.27-29.22-.34-43.76-.94-99.51-4.14-199.1-8.55-298.61-12.85-34.33-1.48-65.93-.4-99.97-7.12-18.87-3.72-41.59-12.06-60.19-13.5-12-.93-25.13.81-37.26-.03l-2.66,8.8c-5.68.02-11.45.32-17.14.14-83.15-2.68-166.43-8.66-249.48-12.85-44.7-2.25-90.05-2.62-134.69-5.81-13.36-.96-26.65-3.69-40.09-3.93-1.16-.26-1.53-3.36-1.63-4.46C4.1,127.47,1.39,88.56.27,53.96c-.38-11.74-1.47-18.56,6.36-28,2.16-2.6,10.79-9.81,13.77-9.81h27.02v12.77h17.69ZM520.03,26.96h-130.68c-.2,0-1.97,3.24-1.97,3.44v86.94l92.87,3.47c5.59-3.35,11.02-5.64,15.03-11.01,12.78-17.14,6.16-31.9,8.04-50.9,1.06-10.7,9.48-24.16,16.69-31.94ZM1042.45,46.81c-1.94.56-16.08,12.5-17.83,14.59-2.54,3.04-13.67,28.97-14.25,32.9-2.95,19.84-2.43,56.45,13.79,70.57,8.25,7.18,26.5,8.99,36.21,4.96,6.95-2.89,20.71-20.91,24.12-27.95,7.75-15.99,8.13-50.42.5-66.32-7.35-15.33-23.29-34.31-42.54-28.76ZM386.4,81.97c-1.92-.3-3.82-.97-5.58-1.79-6.27-2.94-24.04-13.03-29.36-13.86-11.96-1.88-28.49.99-41.19-.08-7.46-.62-17.21-6.2-23.35-4.65-2.46.62-4.42,2.55-4.73,5.09-.55,4.49-.68,22.45.09,26.56,1.44,7.72,19.13,5.08,25.07,5.39,2.32.12,4.47.94,6.8,1.06,10.58.54,49.26-.39,55.92,3.03,4.87,2.5,9.61,10.17,16.33,10.68v-31.43ZM1061.05,280.05c18-17.76,23.39-63.56,8.74-84.17-8.01-11.27-21.04-12.18-32.3-4.71-21.57,14.33-25.64,65.61-10.91,85.24,8.45,11.27,24.04,13.93,34.47,3.64Z"/>
                    <path fill="url(#texture-zerdz)" d="M1046.41,186.33c10.88-1.85,19.29,1.22,25.22,10.66,13.27,21.14,8.18,64.87-9.26,82.91-11.77,12.17-27.03,9.3-36.75-3.51-15.96-21.02-10.16-84.81,20.78-90.06Z"/>
                    <polygon fill="url(#texture-zrzut)" points="255.18 419.17 245.84 479.17 277.84 493.83 288.51 488.5 329.84 503.17 335.18 453.5 269.84 427.17 255.18 419.17"/>
                    <path fill="url(#texture-spust)" d="M481.7,312.82c1.73,1.63-10.44,23-11.51,26.3-6.25,19.25-7.9,55.09-6.16,75.35.92,10.69,6.26,22.06,7.79,31.51.61,3.78.62,12.53-2.51,15.06-6,4.86-19.81,7.52-27.44,7.02-8.6-.57-13.54-2.01-19.09-8.41-22.18-25.55-37.39-71.35-34.45-105.12.3-3.4,4.12-21.55,5.2-24.27,2.3-5.73,16.31-11.4,22.09-12.3,5.27-.82,10.99.18,16.35-.35,8.58-.86,17.89-4.13,26.66-4.78,7.49-.56,15.52.38,23.07,0Z"/>
                </g>
                <g id="color-layers" style="mix-blend-mode: hard-light; opacity: var(--overlay-opacity);">
                    <path id="color-szkielet" class="color-overlay" fill="transparent" d="M1086.95,259.28... (skrócone) ...l3.84-50.98Z"/>
                    <path id="color-zamek" class="color-overlay" fill="transparent" d="M65.11,28.92... (skrócone) ...8.45,11.27,24.04,13.93,34.47,3.64Z"/>
                    <path id="color-zerdz" class="color-overlay" fill="transparent" d="M1046.41,186.33... (skrócone) ...-10.16-84.81,20.78-90.06Z"/>
                    <polygon id="color-zrzut" class="color-overlay" fill="transparent" points="255.18 419.17 245.84 479.17 ... 255.18 419.17"/>
                    <path id="color-spust" class="color-overlay" fill="transparent" d="M481.7,312.82... (skrócone) ...7.49-.56,15.52.38,23.07,0Z"/>
                </g>
              </svg>
        </div>
        <div class="controls">
             <div class="control-section"><h3>1. Wybierz część</h3><div class="part-selection" id="part-selection-container"></div></div>
            <div class="control-section"><h3>2. Wybierz kolor (Cerakote)</h3><div id="color-palette-container" class="color-palette"></div></div>
            <div class="control-section"><button class="reset-button" id="reset-button">Resetuj Kolory</button></div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const parts = [
            { id: 'zamek',    label: 'Zamek' }, { id: 'szkielet', label: 'Szkielet' },
            { id: 'spust',    label: 'Spust' }, { id: 'zerdz',    label: 'Żerdź' },
            { id: 'zrzut',    label: 'Zrzut magazynka' }
        ];
        const cerakoteColors = { "Burnt Bronze":"#8C6A48", "Tungsten":"#6E7176", "O.D. Green":"#5A6349", "Armor Black":"#212121", "MagPul FDE":"#A48F6A", "Gold":"#D4AF37", "S&W Red":"#B70101" };
        const partSelectionContainer = document.getElementById('part-selection-container');
        const paletteContainer = document.getElementById('color-palette-container');
        const resetButton = document.getElementById('reset-button');
        let activePartId = null;
        let selectedPartButton = null;

        function initialize() {
            // Wstawienie pełnych danych ścieżek do warstw kolorów
            parts.forEach(part => {
                const textureElement = document.getElementById(part.id);
                const colorElement = document.getElementById(`color-${part.id}`);
                if (textureElement && colorElement) {
                    const d = textureElement.getAttribute('d');
                    const points = textureElement.getAttribute('points');
                    if(d) colorElement.setAttribute('d', d);
                    if(points) colorElement.setAttribute('points', points);
                }
            });

            // Generowanie przycisków i palety
            parts.forEach(part => {
                const button = document.createElement('button');
                button.textContent = part.label;
                button.addEventListener('click', () => {
                    if (selectedPartButton) selectedPartButton.classList.remove('selected');
                    button.classList.add('selected');
                    selectedPartButton = button;
                    activePartId = part.id;
                });
                partSelectionContainer.appendChild(button);
            });
            for (const [name, hex] of Object.entries(cerakoteColors)) {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.backgroundColor = hex;
                swatch.title = name;
                swatch.addEventListener('click', () => applyColor(hex));
                paletteContainer.appendChild(swatch);
            }
            resetButton.addEventListener('click', resetAllColors);
        }

        function applyColor(hexColor) {
            if (!activePartId) { alert("Wybierz część."); return; }
            const colorElement = document.getElementById(`color-${activePartId}`);
            if (colorElement) { colorElement.setAttribute('fill', hexColor); }
        }

        function resetAllColors() {
            parts.forEach(part => {
                const colorElement = document.getElementById(`color-${part.id}`);
                if (colorElement) { colorElement.setAttribute('fill', 'transparent'); }
            });
            if (selectedPartButton) { selectedPartButton.classList.remove('selected'); selectedPartButton = null; }
            activePartId = null;
        }
        
        initialize();
    });
    </script>
</body>
</html>